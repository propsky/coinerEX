# 兌幣機雲服務MVP開發任務清單
*2週開發進度追蹤與任務管理*

## 📋 專案概述
- **專案名稱**: 兌幣機雲服務MVP
- **開發週期**: 14天 (112小時)
- **團隊配置**: 後端工程師1名 + 前端工程師1名
- **交付目標**: 保留LINE Bot功能 + Web管理介面

---

## 🗓️ 第1週：後端開發 (Day 1-7)

### Day 1-2：環境建置與基礎設施 ✏️
**預計工時**: 16小時  
**負責人**: 後端工程師

#### 🏗️ Linode雲端環境建置
- [ ] **申請Linode帳號與服務**
  - [ ] 申請Linode VPS (2GB RAM, $12/月)
  - [ ] 申請Linode Database PostgreSQL (1GB, $15/月)
  - [ ] 設定帳單與付款方式
  
- [ ] **VPS基礎環境配置**
  - [ ] Ubuntu 22.04 LTS系統安裝
  - [ ] 設定SSH金鑰登入
  - [ ] 配置防火牆規則 (22, 80, 443, 3000埠)
  - [ ] 系統套件更新 `sudo apt update && sudo apt upgrade`

- [ ] **開發環境安裝**
  - [ ] 安裝Node.js 18+ `curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -`
  - [ ] 安裝PM2進程管理器 `npm install -g pm2`
  - [ ] 安裝Git `sudo apt install git`
  - [ ] 安裝Nginx `sudo apt install nginx`

#### 🗄️ 資料庫環境建置
- [ ] **PostgreSQL連線設定**
  - [ ] 取得Linode Database連線資訊
  - [ ] 測試資料庫連線
  - [ ] 安裝pgAdmin或使用psql客戶端
  - [ ] 建立專案資料庫schema

- [ ] **專案初始化**
  - [ ] 建立專案目錄結構
  - [ ] 初始化package.json
  - [ ] 安裝基礎依賴套件
  - [ ] 建立環境變數配置檔案

#### 📱 LINE Bot基礎設定
- [ ] **LINE Developers設定**
  - [ ] 登入LINE Developers Console
  - [ ] 建立新的Messaging API頻道
  - [ ] 取得Channel Access Token
  - [ ] 設定Webhook URL (先用ngrok測試)
  - [ ] 測試基本訊息收發

**✅ Day 1-2 驗收標準**:
- [ ] VPS可正常SSH連線
- [ ] 資料庫連線測試通過
- [ ] Node.js環境運行正常
- [ ] LINE Bot能回應基本訊息

---

### Day 3-4：MQTT整合與LINE Bot開發 🔄
**預計工時**: 16小時  
**負責人**: 後端工程師

#### 📡 MQTT連線整合
- [ ] **MQTT客戶端設定**
  - [ ] 安裝mqtt.js套件
  - [ ] 設定MQTT Broker連線參數
  - [ ] 測試MQTT訊息接收
  - [ ] 建立訊息解析邏輯

- [ ] **資料處理邏輯**
  - [ ] 解析機台狀態MQTT訊息
  - [ ] 解析交易資料MQTT訊息
  - [ ] 建立資料驗證與清洗邏輯
  - [ ] 實作資料庫儲存功能

#### 🤖 LINE Bot功能開發
- [ ] **快速回覆選單設定**
  - [ ] 建立「今日幣量」查詢功能
  - [ ] 建立「昨日幣量」查詢功能
  - [ ] 建立「營業狀態」查詢功能
  - [ ] 建立「查詢特定日期幣量」功能

- [ ] **訊息處理邏輯**
  - [ ] 建立webhook接收端點
  - [ ] 實作訊息路由分發
  - [ ] 建立富文本回覆格式
  - [ ] 實作錯誤處理機制

#### 📊 資料統計邏輯
- [ ] **統計計算功能**
  - [ ] 每日幣量統計計算
  - [ ] 機台狀態統計
  - [ ] 營業時間計算
  - [ ] 歷史資料查詢邏輯

**✅ Day 3-4 驗收標準**:
- [ ] MQTT訊息能正常接收並儲存到資料庫
- [ ] LINE Bot四個快速回覆功能正常運作
- [ ] 統計資料計算準確
- [ ] 錯誤處理機制運作正常

---

### Day 5-6：REST API開發 🔌
**預計工時**: 16小時  
**負責人**: 後端工程師

#### 🏭 機台管理API
- [ ] **基礎CRUD API**
  - [ ] `GET /api/machines` - 機台列表查詢
  - [ ] `GET /api/machines/:id` - 機台詳情查詢
  - [ ] `GET /api/machines/:id/status` - 機台即時狀態
  - [ ] `PUT /api/machines/:id` - 機台資料更新

- [ ] **狀態監控API**
  - [ ] 機台在線狀態檢查
  - [ ] 故障狀態偵測邏輯
  - [ ] 狀態變化記錄
  - [ ] 異常告警邏輯

#### 💰 交易記錄API  
- [ ] **交易資料API**
  - [ ] `GET /api/transactions` - 交易記錄列表 (支援分頁)
  - [ ] `GET /api/transactions/:id` - 交易詳情
  - [ ] `GET /api/transactions/stats` - 交易統計摘要
  - [ ] 查詢篩選功能 (日期、機台、金額範圍)

- [ ] **報表統計API**
  - [ ] `GET /api/stats/today` - 今日統計 (LINE Bot專用)
  - [ ] `GET /api/stats/yesterday` - 昨日統計
  - [ ] `GET /api/stats/date/:date` - 特定日期統計
  - [ ] `GET /api/stats/business` - 營業狀態統計

#### 🛠️ 系統管理API
- [ ] **監控管理API**
  - [ ] `GET /api/system/health` - 系統健康檢查
  - [ ] `GET /api/system/logs` - 系統日誌查詢
  - [ ] 基礎認證中介軟體
  - [ ] API請求記錄與限制

#### 📖 API文檔撰寫
- [ ] **使用Swagger/OpenAPI**
  - [ ] 安裝swagger-ui-express
  - [ ] 建立API規格文檔
  - [ ] 設定Swagger UI介面
  - [ ] 撰寫API使用範例

**✅ Day 5-6 驗收標準**:
- [ ] 所有API端點正常回應
- [ ] API文檔完整可讀
- [ ] 資料格式符合前端需求
- [ ] 基本的錯誤處理與驗證

---

### Day 7：後端整合測試與優化 ✅
**預計工時**: 8小時  
**負責人**: 後端工程師

#### 🧪 系統整合測試
- [ ] **功能測試**
  - [ ] MQTT訊息接收與處理測試
  - [ ] LINE Bot所有功能測試
  - [ ] API端點完整性測試
  - [ ] 資料一致性驗證

- [ ] **效能測試**
  - [ ] API響應時間測試
  - [ ] 資料庫查詢效能測試
  - [ ] 併發請求測試
  - [ ] 記憶體使用量監控

#### 🔧 系統優化與部署準備
- [ ] **效能優化**
  - [ ] 資料庫索引優化
  - [ ] API快取機制
  - [ ] 日誌輸出優化
  - [ ] 錯誤監控設定

- [ ] **部署配置**
  - [ ] PM2配置檔案
  - [ ] Nginx反向代理設定
  - [ ] SSL憑證申請與配置
  - [ ] 環境變數生產配置

**✅ Day 7 驗收標準**:
- [ ] 所有功能測試通過
- [ ] 系統穩定運行8小時以上
- [ ] API響應時間 < 500ms
- [ ] LINE Bot回應時間 < 5秒

---

## 🗓️ 第2週：前端開發 (Day 8-14)

### Day 8-9：UniApp基礎頁面開發 📱
**預計工時**: 16小時  
**負責人**: 前端工程師

#### 🎨 專案初始化與環境設定
- [ ] **開發環境準備**
  - [ ] 安裝HBuilderX IDE
  - [ ] 建立UniApp專案
  - [ ] 安裝uView UI框架
  - [ ] 設定深色主題配色

- [ ] **專案結構建立**
  - [ ] 建立頁面目錄結構
  - [ ] 設定路由配置
  - [ ] 建立共用組件庫
  - [ ] 設定狀態管理(Vuex)

#### 🔐 登入與導航頁面
- [ ] **登入頁面開發** (參考PDF設計)
  - [ ] IOTCoinChanger品牌標識
  - [ ] 帳號密碼輸入表單
  - [ ] 記住密碼功能
  - [ ] 登入驗證邏輯

- [ ] **側邊欄導航** (參考PDF設計)
  - [ ] 側邊欄選單結構
  - [ ] 導航圖示與文字
  - [ ] 選單展開/收合功能
  - [ ] 用戶資訊顯示

#### 🏭 機台狀態頁面開發
- [ ] **機台列表頁面** (完全參考PDF第2頁)
  - [ ] 機台卡片式設計
  - [ ] 狀態指示燈 (正常/故障/離線)
  - [ ] 機台基本資訊顯示
  - [ ] 列表滾動與載入

- [ ] **機台詳情展開** (參考PDF展開後設計)
  - [ ] 詳細狀態資訊
  - [ ] 感應器數據顯示
  - [ ] 最後更新時間
  - [ ] 編輯機台資訊功能

**✅ Day 8-9 驗收標準**:
- [ ] 頁面風格與現有系統完全一致
- [ ] 手機豎屏顯示完美適配
- [ ] 頁面切換流暢無卡頓
- [ ] 所有互動功能正常

---

### Day 10-11：出幣記錄與統計頁面 💰
**預計工時**: 16小時  
**負責人**: 前端工程師

#### 📊 出幣記錄頁面開發  
- [ ] **記錄列表頁面** (完全參考PDF第2頁)
  - [ ] 交易記錄列表顯示
  - [ ] 時間、機台、金額欄位
  - [ ] 分頁載入功能
  - [ ] 下拉刷新功能

- [ ] **篩選與查詢功能**
  - [ ] 日期範圍選擇器
  - [ ] 機台篩選下拉選單
  - [ ] 金額範圍篩選
  - [ ] 清除篩選功能

#### 📈 統計報表頁面開發
- [ ] **幣量統計頁面** (對應LINE Bot功能)
  - [ ] 今日/昨日幣量對比卡片
  - [ ] 各機台幣量分佈圖表
  - [ ] 簡單的趨勢圖表
  - [ ] 總計與平均值顯示

- [ ] **營業狀態頁面**
  - [ ] 營業狀態總覽
  - [ ] 機台開機率統計
  - [ ] 異常狀況統計
  - [ ] 即時狀態更新

#### 📊 圖表組件整合
- [ ] **uCharts圖表庫**
  - [ ] 安裝並配置uCharts
  - [ ] 建立柱狀圖組件 (幣量分佈)
  - [ ] 建立折線圖組件 (趨勢變化)
  - [ ] 建立圓餅圖組件 (狀態分佈)

**✅ Day 10-11 驗收標準**:
- [ ] 統計數據與LINE Bot查詢結果完全一致
- [ ] 圖表顯示正確且美觀
- [ ] 篩選功能運作正常
- [ ] 頁面載入速度 < 3秒

---

### Day 12-13：系統整合與優化 🔧
**預計工時**: 16小時  
**負責人**: 前端工程師 + 後端工程師

#### 🌐 前後端API對接
- [ ] **HTTP請求封裝**
  - [ ] 建立統一的API請求工具
  - [ ] 設定請求/回應攔截器
  - [ ] 實作載入中狀態管理
  - [ ] 統一錯誤處理機制

- [ ] **資料格式對接**
  - [ ] 確認所有API回應格式
  - [ ] 建立資料轉換函數
  - [ ] 處理時區與日期格式
  - [ ] 驗證資料完整性

#### 🐛 錯誤處理與用戶體驗
- [ ] **錯誤處理機制**
  - [ ] 網路錯誤友善提示
  - [ ] API錯誤訊息顯示
  - [ ] 資料載入失敗重試
  - [ ] 離線狀態檢測

- [ ] **用戶體驗優化**
  - [ ] 載入動畫與骨架屏
  - [ ] 空狀態頁面設計
  - [ ] 操作回饋與提示
  - [ ] 頁面切換動畫

#### ⚡ 效能優化
- [ ] **前端效能優化**
  - [ ] 圖片壓縮與懶載入
  - [ ] 組件按需載入
  - [ ] 本地儲存快取
  - [ ] 列表虛擬滾動 (如需要)

- [ ] **後端效能調優**
  - [ ] 資料庫查詢優化
  - [ ] API回應快取
  - [ ] 並發請求控制
  - [ ] 記憶體使用監控

**✅ Day 12-13 驗收標準**:
- [ ] 所有功能流程完整運作
- [ ] 錯誤提示友善且準確
- [ ] 頁面載入與切換流暢
- [ ] 資料與LINE Bot完全同步

---

### Day 14：最終測試與上線部署 🚀
**預計工時**: 8小時  
**負責人**: 全體團隊

#### 🧪 完整系統驗收測試
- [ ] **功能完整性測試**
  - [ ] LINE Bot 4個快速回覆功能測試
  - [ ] UniApp所有頁面功能測試
  - [ ] 資料同步一致性驗證
  - [ ] 跨設備相容性測試

- [ ] **用戶驗收測試**
  - [ ] 模擬真實使用情境
  - [ ] 驗證操作流程直觀性
  - [ ] 確認與現有系統風格一致
  - [ ] 收集測試回饋並修正

#### 🌐 生產環境部署
- [ ] **前端打包與部署**
  - [ ] UniApp打包為H5版本
  - [ ] 設定生產環境API地址
  - [ ] 部署至雲端靜態託管
  - [ ] 設定自定義域名

- [ ] **後端生產部署**
  - [ ] PM2生產環境配置
  - [ ] Nginx反向代理設定
  - [ ] SSL憑證正式配置
  - [ ] 環境變數安全設定

#### 📋 交付物準備
- [ ] **文檔整理**
  - [ ] 使用者操作手冊
  - [ ] 系統管理手冊  
  - [ ] API文檔最終版
  - [ ] 故障排除指南

- [ ] **備份與監控**
  - [ ] 資料庫自動備份設定
  - [ ] 系統監控告警配置
  - [ ] 日誌收集與分析
  - [ ] 緊急聯絡流程

**✅ Day 14 最終驗收標準**:
- [ ] 客戶驗收測試一次通過
- [ ] 系統穩定運行24小時
- [ ] 所有承諾功能100%交付
- [ ] 完整文檔與維護支援到位

---

## 📊 進度追蹤表

### 第1週進度總覽
| 日期 | 主要任務 | 預計工時 | 完成狀態 | 備註 |
|------|---------|----------|----------|------|
| Day 1-2 | 環境建置 | 16h | ⭕ 進行中 | |
| Day 3-4 | MQTT+LINE Bot | 16h | ⭕ 待開始 | |
| Day 5-6 | API開發 | 16h | ⭕ 待開始 | |
| Day 7 | 整合測試 | 8h | ⭕ 待開始 | |

### 第2週進度總覽  
| 日期 | 主要任務 | 預計工時 | 完成狀態 | 備註 |
|------|---------|----------|----------|------|
| Day 8-9 | 前端頁面 | 16h | ⭕ 待開始 | |
| Day 10-11 | 統計功能 | 16h | ⭕ 待開始 | |
| Day 12-13 | 系統整合 | 16h | ⭕ 待開始 | |
| Day 14 | 測試部署 | 8h | ⭕ 待開始 | |

### 關鍵里程碑
- [ ] **M1 - 後端基礎完成** (Day 7)
- [ ] **M2 - 前端基礎完成** (Day 11) 
- [ ] **M3 - 系統整合完成** (Day 13)
- [ ] **M4 - 正式上線** (Day 14)

---

## ⚠️ 風險提醒與應對

### 可能的阻礙因素
1. **MQTT資料格式與預期不符** → 第1天立即驗證
2. **LINE Bot API限制** → 提前研讀文檔
3. **前端UI複雜度超預期** → 備用簡化方案
4. **第三方服務穩定性** → 準備備援方案

### 每日檢查點
- **每日晚上檢查**: 當日任務完成度
- **遇到問題立即標記**: 紅色標示並尋求協助  
- **每3天回顧**: 進度是否符合預期
- **風險等級評估**: 綠色(順利)/黃色(注意)/紅色(危險)

---

## 📞 團隊協作與溝通

### 每日站會 (15分鐘)
- 昨日完成了什麼？
- 今日計畫做什麼？  
- 遇到什麼阻礙？

### 溝通工具
- **即時溝通**: LINE群組
- **任務管理**: 本清單更新
- **程式碼管理**: Git版本控制
- **文檔共享**: GitHub文檔

### 問題回報格式
```
🚨 問題回報
時間: [具體時間]
問題描述: [詳細說明]  
影響程度: [高/中/低]
預計解決時間: [時間估算]
需要協助: [是/否]
```

---

**📝 使用說明**:
1. 每完成一項任務，請在對應的 `[ ]` 中打勾 `[✅]`
2. 遇到問題時，在備註欄標記並說明
3. 每日更新進度狀態
4. 重要決策或變更請記錄在備註中

**🎯 成功關鍵**: 嚴格按照時程執行，遇到問題立即溝通，確保每個里程碑都能按時完成！